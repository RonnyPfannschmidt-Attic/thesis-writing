\chapter{Implementation ( 15 \% ) }


\section{Werkzeuge}
\subsection{Datenbank}

Das Kriterium der \textbf{Master-Master Replikation}
schränkte die Auswahl der verwendbaren Datenbanksysteme bereits stark ein.

In die nähere Betrachtung kommen CouchDB (dokumentorientiert)
und PostgreSQL (relational).
Beide Systeme besitzen Werkzeuge f\"ur Master-Master Replikation
und primitiven für Notifikationen.

%XXX: cites
Andere Systeme wie Mysql (relational), Mongodb(dokumentorientiert)
und  Neo4J (graph) scheiden aus, weil zu ihrem Funktionsumfang
nur die Master-Slave Replikation geh\"ort.
Das System Riak wurde verworfen, da es \"Anderungs-notifikationen
nicht unterstützte und in einem kurzen Vergleich
die Anfragen langsamer beantwortete.

Im Kurzvergleich von PostgreSQL mit CouchDB,
ging CouchDB als  hervor.
Im Test mussten bei Couchdb zwar Abstriche im Bereich Performance gemacht werden,
jedoch stellte sich heraus, das die \"Anderungsnotifikationen von Couchdb detaillierter sind.
Außerdem erscheint der Prozess der Replikation in CouchDB
als fehlertoleranter und einfacher.

% \cite
W\"ahrend in Postgresql die Notifikationen einfach nur eine Nachricht sind,
dass etwas ge\"andert wurde,
% \cite couchdb:changestream}
so beinhalten die Notifikationen von CouchDB, genaue Informationen
\"uber das ge\"anderte Objekt, eventuelle Datenbankkonflikte
und auf Wunsch sogar das Objekt selbst.

\subsection{Programmiersprachen}

Es wurden 2 Programmiersprachen Ausgew\"ahlt.
Zum einen Python, wegen seiner Bibliotheken und
zum anderen Javascript, da es die Datenbankinterne Sprache von Couchdb ist.

\begin{table}[ht]
\centering
\begin{tabular}{l|c|c}
                            & \textbf{Python}   & \textbf{Javascript} \\
    \hline
    Datenbankintern         & nein              & ja \\
    Prozesskontrolle        & integriert        & extern, rudiment\"ar \\
    SCM Api                 & Verf\"ugbar (anyvc)& nicht verf\"ugbar \\
    CouchDB Client          & verg\"ugbar       & verf\"ugbar \\
\end{tabular}
\caption{\"Uberblick \"uber Features und Bibliotheken der Sprachen}
\label{tab:python-vs-js}
\end{table}

Ein besonderes Problem mit Javascript ist,
dass es Datenbankintern Bibliotheken, die Datenbank-extern sind,
nicht oder nur in limitierter Form verwenden kann.
Die Laufzeitumgebung weißt große Unterschiede
zwischen Datenbank-interner und Datenbank-externer Verwendung auf.

Weiterhin konnten wie in Tabelle~\ref{tab:python-vs-js} aufgezeigt,
für einige benötigte Bibliotheken keine
oder nur unzureichende Implementationen gefunden werden.
Somit ist Javascript für die Implementation der Komponenten
nur sehr bedingt geeignet.

Python hingegen hat Bibliotheken für alle notwendigen Grundfunktionen
und hat somit alle Voraussetzungen,
um die Implementation der Komponenten zu stützen.

\subsection{Bibliotheken}

\subsubsection{Datenbank Interaktion}


\subsubsection{SCM Interaktion}



\subsection{Weitere Werkzeuge}

\subsubsection{Testwerkzeuge}

Zum Testen wird das Test Framework py.test \cite{pytest:website} verwendet.
Es das einzige Test Framework für Python,
welches neben Werkzeugen für UnitTests auch Tools für
Funktionale und Akzeptanz Tests mitbringt.

Mit der Erweiterung ``pytest-couchdbkit"" \cite{pytest:couchdbkit} ist es Bereits
bestens für das Testen von Applikationen und einzelnen Funktionen,
welche CouchDB verwenden, geeignet.
Außerdem basiert ``pytest-couchdbkit"" auch auf der Bibliothek ``couchdbkit""

\subsubsection{Datenbank Management}

\section{Grundlegende Primitiven}

\subsection{listen\_changes}

\subsection{run\_callbacks}
\subsection{gather\_next}
\subsection{watch\_for}

\section{komponenten}

\subsection{Auftragsannahme}

\begin{verbatim}
- schritte
  - neu
  - bearbeiten
  - erhalten
  - validation
  - valid/invalid
  - bereitschaft
\end{verbatim}

\subsection{Auftragsverwaltung}

\begin{verbatim}
- erstellen von tasks
- erstellen von schritten
- bekanntmachung
\end{verbatim}

\subsection{auftragsvergabe}

\begin{verbatim}
- mvcc<> claim objekte
- anerkennung durch den master

\end{verbatim}

\subsection{Auftragsabarbeitung}
\begin{verbatim}
-lineares modell, ein schritt nach dem anderen
\end{verbatim}

\subsection{Prozessschritte}

\begin{verbatim}
- intro prozesse unix
- ausfuehrung
- datensammlung
- theoretische betrachtung stats
- \ldots
\end{verbatim}

\subsection{Quellcode Management Schritte}


\begin{verbatim}
- anyvc
- exemplarischer ablauf
    - checkout
    - update
\end{verbatim}

\section{Exemplarische Erweiterung - Datenaggregation}

 
%XXX: falscher platz
\begin{verbatim}

- beispiel sommer
  - ausgabe eines programms
  - zusammenfassung in graphen/uebersichten

\end{verbatim}

