\chapter{Grundlagen (15\%)}

\section{Grundlegendes zu Datenbankgest\"utzten Applikationen}

\begin{verbatim}
- datenhaltung
- massendaten
- grundlegende eigenschaften der daten
  - idr keine configuration
- mechanismen fuer ablag
- mechanismen fuer speicherung
\end{verbatim}


\section{SQL}

- relationales modell

\section{NoSQL}

NoSQL (auch Not only Sql) bezeichnet eine breite Klasse
von Datenbank Managementsystmen, welche sich im wesentlichen
vom traditionellen relationalen Model dadurch unterscheiden,
dass ihnen weder SQL als Abfragesprache, noch Joins zur Verfügung stehen.
~ \cite{wikipedia:nosql}



Weiterhin bemerkenswert ist der Umgang mit Konsistentz und dem CAP Theorem.
Eventuelle Konsistenz, im speziellen das Prinzip BASE (Basically Available, Soft state, Eventual consistency) genannt.

~ \cite{wikipedia:base}

Anstelle von Atomaren operationen über das gesammte system,
beschränkt sich die Grösse von atomaren Operationen dabei auf eines 
oder wenige Systeme, gesammtkonsistenz wurd jedoch erst später durch Replikation auf weitere systeme hergestellt.


\begin{verbatim}
- kurzuebersicht


\end{verbatim}



\section{CouchDB}


\begin{verbatim}
- ausgewaehlt

\end{verbatim}

Couchdb gehört zur den schemalosen dokumentorientierten Datenbanken,
es legt Daten in Form von strukturierten Dokumenten ab.

Das Motto der Datenbak ist ``Entspann Dich``

Frei nach dem starttext der Applikation.

\begin{verbatim}
Apache CouchDB has started. Time to relax.
\end{verbatim}


\begin{quote}
Warum ist Entspannung wichtig? Die Produktivität von Entwicklern hat sich in den letzten fünf Jahren verdoppelt.
Für diesen Schub sind hauptsächlich bessere Tools, die gleichzeitig einfacher zu bedienen sind, verantwortlich.
Wenn man ``Ruby on Rails`` als Beispiel nimmt, so sieht man ein unendlich komplexes Framework mit dem der Einstieg jedoch sehr leicht ist.
Rails ist eine Erfolgsgeschichte weil das Hauptziel der Entwicklung auf der einfachen Bedienung lag.
Das ist einer der Gründe, warum CouchDB entspannend ist.
Das Verstehen der Grundkonzepte von CouchDB fühlt sich für jeden natürlich an, der in irgendeiner Form mit dem Web arbeitet.
Selbst nicht-technischen Leuten ist es relativ einfach zu vermitteln.

Nicht im Weg zu stehen, wenn kreative Menschen versuchen ein Problem zu lösen, ist eine der wichtigsten Eigenschaften — eine,
die CouchDB versucht gut erfüllen. Für ``uns`` waren die bestehenden Tools zu schwerfällig — sowohl während der Entwicklung
als auch während des Betriebs. Deshalb haben wir uns darauf konzentriert,
CouchDB so einfach wie möglich zu halten und es spielend leicht bedienen zu können.
Was die intuitive HTTP basierte REST API auch Zeigt
\end{quote}
\cite[Deutsche Einführung]{couchdb:guide}


\subsection{Grundlgende Eigenschaften}


\begin{itemize}
\item Geschrieben in: Erlang
\item Hauptargumente: Konsistenz, einfache Verwendung
\item Lizenz: Apache
\item Protocol: HTTP/REST
\item Bi-directionale (!) Replikation,
    Kontinuierlich or ad-hoc,
    mit Konflikt Erkennung,
    was bedeutet, master-master Replikation. (!)

\item MVCC - schreiben blockiert lesen nicht
\item alte Dokumentrevisionen verfügbar
\item Crash-only (zuverlässiges) design
\item benötigt regelmässige Kompaktion/Optimierung
\item Views: eingebautes map/reduce
\item Formatierende Views: lists \& shows
\item Server-seitige DoKument validierung möglich
\item Authentication möglich
\item Real-time updates via \_changes (!)
\item Attachment behandlung
\item CouchApps (eigenständige js apps innerhalb der db)
\item jQuery mit dabei
\end{itemize}
~ \cite{web:db-compare}


Couchdb bietet sich besonders für Daten an, welche angesammlt, aber selten geändert werden.
Views sind ein ideales Werkzeug um vordefinierte Abfragen auszuführen.
Master-Master Replikation ermöglicht einfaches Deployment auf mehreren Servern.


\subsection{Buchhalter verwenden keinen Radierer}

Diese einfache Feststellung soll den Einstieg in das Verständniss von Transaktionen auf Dokumentebene geben.
In der Buchhaltung ist es so, das jede Aktion, die in Auftrag gegeben wird, auch durchgeführt wird.
Es gibt gibt kein Zurück wie z.b. den Fehlschlag einer Sql Transkation nach zu langer Wartezeit.

Dieses Verfahren stammt aus der Zeit in der Finanztransaktionen  mitunter Wochen bis zur Best\"atigung ben\"otigten.


\subsection{Grundlagen Views}

\begin{verbatim}
- map/reduce
- caching
- wann regeneraton

\end{verbatim}

\subsection{Indizierung mit Views}



\subsection{Aggregation mit Views}
\subsection{Join mit Views}



Views in Couchdb sind die Werkzeuge,
welche das Pendant zu Indexen und Aggregationen
aus traditionellen Datenbanksystemen stellen.

%XXX satzbau
Im Gegensatz zu Indexen in traditionellen Datenbanken, werden sie auf alle Dokumente,
nicht nur die Dokumente eines Speziellen Types angewendet


Resultate des Integriertem MapReduce.
Sie werden geordnet nach dem Key abgelegt und koennen über Key Ranges abgefragt werden.


Views werden als Ersatz für die in Sql üblichen Indexe und Aggregationen verwendet.
Dabei stellt eine  reine map operation einen Index dar, und map+reduce eine aggragation

\newpage
Zum Beispiel

\begin{minted}{javascript}
{
    "_id": "user1",
    "type": "user",
    "name": "bob",
    "roles": ["admin", "developer"],
}

{
    "_id": "user2",
    "type": "user",
    "name": "alice",
    "roles": ["admin"],
}
\end{minted}


Stellen 1 einfache Dokumene dar.

will man basierend auf dem Namen, suchen, so benötigt man eine Map View mit folgender Map Funktion

\begin{minted}{javascript}
function (doc) {
    if (doc.type == "user")
        emit(doc.name, null);
}
\end{minted}

Im View befinden sich dann folgende Daten:

\begin{minted}{javascript}
{"total_rows":2,"offset":0,"rows":[
    {"id":"user2","key":"alice","value":null},
    {"id":"user1","key":"bob","value":null}
]}
\end{minted}



\section{Kontinuierliche Integration/Verteilung}

\subsection{Überblick}

Kontinuierliche Integration/Verteilung bezeichent Programme/Dieste,
welche dazu Dienen automatisch 

\subsection{existierende Systeme}

\subsubsection{buildbot}

%XXX referenzen
BuildBot positioniert sich als eine Art Meta-Build-Server.
es biete keine normale Oberfläche, sondern wird mittels
Komposition von Metadaten und Komponenten konfiguriert.

Die Konfiguration des Servers stellt dabei ein Python script,
welches die Operationen ausführt, welche zur Zusammenstellung des gewünschten Servers notwendig sind.

Es ist möglich Builds Jobs mit minimale Parameter in Form von Strings zu Übergeben.

\subsubsection{jenkins/hudson}

%XXX referenzen
Jenkins und Hudson stellen ein Benutzerfreundliches,
jedoch limitiertes System zum einfachen Anlegen von Build-Jobs.

Parametrisierung ist nicht möglich.

\subsection{Vor- und Nachteile der existierenden Systeme}

\begin{verbatim}
- buildbot/jenkins
  - konfigurierbarkeit
  - zentrales management
  - eigene datenformate

- etablierung
- dokumentation
\end{verbatim}
